<!DOCTYPE html>
<html>
<head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properties -->
    <title>IAO - Betoken</title>
    <meta name="description" content="">
    <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.min.css">
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,700" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-116797881-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-116797881-1');
    </script>
    <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous"></script>
    <script src="semantic/dist/semantic.min.js"></script>
    <script src="bundle.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="semantic/dist/themes/default/assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="semantic/dist/themes/default/assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="semantic/dist/themes/default/assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="semantic/dist/themes/default/assets/images/icons/site.webmanifest">
    <link rel="mask-icon" href="semantic/dist/themes/default/assets/images/icons/safari-pinned-tab.svg" color="#22C88A">
    <link rel="shortcut icon" href="semantic/dist/themes/default/assets/images/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-config" content="semantic/dist/themes/default/assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <script>
        var getUrlParameter = function getUrlParameter(sParam) {
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        };

        $(document)
        .ready(() => {
            // init
            window.payAmountInDAI = 50;
            $('.ui.checkbox').checkbox({
                onChecked: () => {
                    $('.continue').removeClass('disabled');
                },
                onUnchecked: () => {
                    $('.continue').addClass('disabled');
                }
            });
            //$('#referred_msg').show();
            updatePayAmount = (symbol) => {
                $('#pay_token_amount').text('loading...');
                return window.getAccountPriceInTokens(symbol, window.payAmountInDAI).then((price) => {
                    $('#pay_token_amount').text(`${price} ${symbol}`);
                    return price;
                });
            }
            updateETHPrice = () => {
                return window.getAccountPriceInTokens("ETH", window.payAmountInDAI).then((price) => {
                    $('#eth_price').text(price);
                    return price;
                });
            }
            // load the initial price
            updateETHPrice().then((price) => {
                $('#pay_token_amount').text(`${price} ETH`);
            });

            // button events
            $('.kro_btn').on('click', (e) => {
                // set payment amount
                window.payAmountInDAI = +e.currentTarget.value; // convert to Number
                // change button highlight
                $('.kro_btn').removeClass('positive');
                $(e.currentTarget).addClass('positive');
                // update prices
                updatePayAmount($('#dropdown')[0].value);
                updateETHPrice();
            });

            $('.continue').on('click', (e) => {
                var register = () => {
                    var symbol = $('#dropdown')[0].value;
                    var amountInDAI = window.payAmountInDAI;
                    var referrer = getUrlParameter('referrer');
                    switch (symbol) {
                        case 'ETH':
                            return window.registerWithETH(amountInDAI, referrer);
                        case 'DAI':
                            return window.registerWithDAI(amountInDAI, referrer);
                        default:
                            return window.registerWithToken(symbol, amountInDAI, referrer);
                    }
                }
                if (e.currentTarget.id === 'metamask_btn') {
                    window.loadWeb3(false).then(register);
                } else if (e.currentTarget.id === 'ledger_btn') {
                    window.loadWeb3(true, 'ropsten').then(register);
                }
            });

            // load token dropdown
            var dropdown = $('#dropdown');
            window.getTokenList().then(
                (tokens) => {
                    $.each(tokens, (i) => {
                        info = tokens[i];
                        dropdown.append($("<option />").val(info.symbol).text(`${info.name} (${info.symbol})`));
                    });
                }
            );
            dropdown.change((e) => {
                updatePayAmount(e.target.value);
            });
        });
    </script>
</head>
<body>
    <div class="bg-pattern-lines">
        <!-- Page Contents -->
        <div class="widescreen large screen computer only ui equal width centered column grid container">
            <div class="ui fluid text menu">
                <div class="item">
                    <a href="https://betoken.fund" target="_blank" title="Go to Betoken's homepage">
                        <img class="ui image logo" src="semantic/dist/themes/default/assets/images/logo-1.svg" alt="Betoken logo">
                    </a>
                </div>
                <div class="ui right item">
                    <div class="item">Need help?</div>
                    <a class="item telegram" href="https://t.me/betokenfund" target="_blank">Contact us on Telegram <i class="telegram icon"></i></a>
                </div>
            </div>
        </div>
        <div class="mobile tablet only ui equal width centered column grid container">
            <img class="ui image" src="semantic/dist/themes/default/assets/images/logo-1.svg" width="192" alt="Betoken logo">
        </div>

        <!-- CTA hero -->
        <div class="ui hidden divider"></div>
        <div class="ui hidden divider"></div>
        <div class="two column stackable very relaxed ui grid container">
            <div class="column">
                <h1>Initial Account Offering</h1> <br>
                <b>Please read the following important info before purchasing:</b>
                <div class="ui list">
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">
                                Purchasing an account will make you a Betoken manager and grant you Kairo tokens, non-transferable proof of how good you are at investing.
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">
                                During the IAO, accounts are sold at a discount.
                                You will still be able to purchase accounts after the IAO is over and Betoken is launched on the Ethereum Mainnet, but it will be 25% more expensive.
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">The more Kairo you own, the more money you will manage, the more commission you will receive.</div>
                        </div>
                        <br>
                    </div>
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">You will be able to earn Kairo by making profitable investments.</div>
                        </div>
                        <br>
                    </div>
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">Your Kairo will be credited to the Ethereum account you paid with soon after your purchase, but the functionalities of your account will not be available until the Betoken fund launches on the Ethereum Mainnet.</div>
                        </div>
                        <br>
                    </div>
                    <div class="item">
                        <i class="circle green icon"></i>
                        <div class="content">
                            <div class="description">Please read <a href="https://medium.com/betoken/making-of-a-meritocracy-an-overview-of-betoken-70e9641b1175" target="_blank">this article</a> if you want to better understand Betoken.</div>
                        </div>
                        <br>
                    </div>
                </div>
                <p></p>
                <p></p>
            </div>
            <div class="column">
                <div class="ui segment">
                  <p><strong>Processing connection to your ledger</strong></p>
                  <p>Please make sure:</p>
                  <ul>
                    <li>Your Ledger is properly plugged in.</li>
                    <li>You have logged into your Ledger.</li>
                  </ul>
                  <div class="ui active centered inline loader"></div>
                  <div class="ui hidden divider"></div>
                  <p><img class="powered-by" src="semantic/dist/themes/default/assets/images/ledger-big.png" width="128" alt="ledger-logo"></p>
                </div>
            </div>
        </div>
        <div class="ui hidden divider"></div>
    </div>
    <!-- CTA footer -->
    <div class="ui container">
        <div class="ui grid">
          <div class="column">
            <img class="powered-by" src="semantic/dist/themes/default/assets/images/powered-by-kn.png" width="128" alt="kyber-logo">
          </div>
        </div>
        <div class="ui text fluid four stackable item menu">
            <a class="item telegram" href="https://t.me/betokenfund" target="_blank">Telegram <i class="telegram icon"></i></a>
            <a class="item" href="mailto:hello@betoken.fund">hello@betoken.fund</a>
            <a class="item" href="https://github.com/Betoken/Whitepaper/blob/master/BetokenWhitepaper.pdf" target="_blank">Whitepaper</a>
            <a class="item" href="https://github.com/Betoken/documents/blob/master/Incentivized%20Meritocracies/Incentivized%20Meritocracies.pdf" target="_blank">Incentivized Meritocracy</a>
        </div>
    </div>
</body>
</html>
